// Generated by CoffeeScript 1.7.1
(function() {
  var add_group, clear_groups, do_refresh, form_params, process_form_element, reload;

  reload = function(my_suffix) {
    $("#results-div").html("");
    $.ajax({
      url: "/analyse".concat(my_suffix),
      success: function(data) {
        $("#results-div").html(data);
      }
    });
  };

  process_form_element = function(output_hash, element) {
    var checked, name, tagName, type, value;
    name = element.name;
    value = element.value;
    type = element.type;
    checked = element.checked;
    tagName = element.tagName;
    if (tagName === "TEXTAREA") {
      output_hash[name] = value;
    } else if (tagName === "INPUT") {
      switch (type) {
        case "text":
        case "hidden":
        case "password":
          output_hash[name] = value;
          break;
        case "radio":
        case "checkbox":
          if (checked) {
            if (value) {
              output_hash[name] = value;
            } else {
              output_hash[name] = "on";
            }
          }
      }
    }
    return output_hash;
  };

  form_params = function(form) {
    var elem, params, res, _i, _len, _ref;
    params = new Object();
    _ref = form.elements;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      elem = _ref[_i];
      res = process_form_element(params, elem);
    }
    return res;
  };

  add_group = function() {
    var d, k, myval, myval2, params, v;
    d = $('#groups-div');
    d[0].className = "visible_div";
    params = form_params($("#form")[0]);
    for (k in params) {
      v = params[k];
      myval = "" + k + ": " + v + "...";
      myval2 = "<input type=\'button\' class=\'btn btn-success btn-xs\' value=\"" + myval + "\"> <nbsp>";
      d.append(myval2);
    }
    d.append("<br>");
  };

  clear_groups = function() {
    $('#groups-div').html("");
    return $('#groups-div')[0].className = "invisible_div";
  };

  do_refresh = function() {
    var params, suffix;
    params = form_params($("#form")[0]);
    suffix = jQuery.param(params);
    reload("?".concat(suffix));
  };

}).call(this);

//# sourceMappingURL=index.map
